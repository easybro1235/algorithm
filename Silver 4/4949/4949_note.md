# 🏷️ [BOJ 4949] 균형잡힌 세상
- **링크:** https://www.acmicpc.net/problem/4949
- **분류:** 자료구조, 스택(Stack), 문자열
- **체감 난이도:** ⭐⭐⭐⭐⭐ (논리는 완벽했으나 C++ 문법의 늪에 빠져 하루를 통째로 날림)

## 1. 🧠 기본적인 접근 방식 (의사코드/흐름)
1. `while(true)` 안에서 `getline(cin, str)`을 이용해 온점(`.`) 단위가 아닌 **엔터 단위**로 한 줄씩 통째로 입력받는다.
2. 입력받은 문자열이 딱 `"."` 하나라면 무한 루프를 탈출(`break`)한다.
3. 플래그 변수 `bool isokay = true;` 를 기본값으로 설정하고, 새 스택을 준비한다.
4. 문자열을 한 글자씩 순회하며 괄호만 걸러낸다.
   - 여는 괄호 `(`, `[` 는 스택에 무조건 `push`.
   - 닫는 괄호 `)`, `]` 가 나오면 스택이 비어있는지, 그리고 맨 위(`top()`) 문자와 내 짝이 맞는지 확인 후 `pop()`.
   - 만약 스택이 비어있거나 짝이 안 맞는다면 `isokay = false` 처리 후 루프를 즉시 탈출(`break`).
5. 순회가 다 끝났는데 스택에 찌꺼기가 남아있다면(`!stk.empty()`) 짝이 안 맞는 것이므로 `isokay = false`.
6. `isokay` 값에 따라 `yes` 또는 `no`를 출력한다.

## 2. 💻 핵심 작동 코드 (리팩토링 완료 버전)
> *if-else 중첩을 줄이고 && 연산자를 활용하여 가독성을 높인 최종 방어 로직*

```cpp
for (char ch : str) {
    // 1. 여는 괄호는 무조건 넣기
    if (ch == '(' || ch == '[') {
        stk.push(ch);
    }
    // 2. 소괄호 닫기
    else if (ch == ')') {
        // 비어있지 않고 짝이 맞을 때만 pop
        if (!stk.empty() && stk.top() == '(') {
            stk.pop();
        } else {
            isokay = false; // 불량품 발견
            break; // 즉시 검사 중단!
        }
    }
    // 3. 대괄호 닫기
    else if (ch == ']') {
        if (!stk.empty() && stk.top() == '[') {
            stk.pop();
        } else {
            isokay = false;
            break;
        }
    }
}

// 4. 문자열 끝났는데 스택에 남은 괄호가 있다면 오류
if (!stk.empty()) isokay = false; 
```

## 3. 🛡️ 예외 처리 및 코너 케이스 (Corner Case)
- **예외 1:** 닫는 괄호가 먼저 나오는 경우 `] )`
  - 스택이 텅 비어있을 때 `stk.top()`을 호출하면 **Segmentation Fault (런타임 에러)**가 발생함. 무조건 `!stk.empty()`를 먼저 체크하는 방어적 프로그래밍 필수!
- **예외 2:** 여는 괄호만 잔뜩 나오는 경우 `( [ ( [ ( `
  - 순회 중에는 에러가 발생하지 않음. 반드시 `for`문이 끝난 직후에 `!stk.empty()`로 잔여물 검사를 해줘야 함.

## 4. 🚨 나의 오답 노트 & 실수하기 쉬운 부분 (※주의※)
- **C++ 조건문 문법 함정:** `if (ch == '(' || '[')` 라고 썼더니, C++에서는 `'['`(아스키코드 91)을 항상 `True`로 인식해서 모든 문자를 스택에 밀어 넣는 대참사 발생. 👉 `if (ch == '(' || ch == '[')` 처럼 주체를 명확히 두 번 적어줘야 함.
- **중괄호 `{ }` 생략 조심하기:** `else` 밑에 `isokay = false;` 와 `break;` 두 줄을 썼는데 중괄호를 안 묶었음. 컴파일러가 `break;`를 `else` 밖의 코드로 인식해서, 정상적인 괄호가 나올 때마다 컨베이어 벨트를 꺼버림(루프 강제 탈출). 👉 **if-else 안의 코드가 1줄이든 2줄이든 무조건 중괄호를 치는 습관을 들일 것!**
- **플래그 변수 덮어쓰기:** 마지막 잔여물 검사에서 `if (stk.empty()) isokay = true;` 라고 적었었음. 중간에 괄호 짝이 안 맞아서 기껏 `false`를 찾아놨는데, 마지막에 스택이 비어있다는 이유로 다시 `true`로 세뇌시켜버리는 치명적 논리 오류.

## 5. ⏱️ 복잡도 분석
- **시간 복잡도:** $O(N)$ (문자열의 길이를 한 번씩만 순회하며 스택의 삽입/삭제는 $O(1)$)
- **공간 복잡도:** $O(N)$ (최악의 경우, 문자열 길이만큼 여는 괄호가 스택에 쌓임)